<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Fri May 07 18:37:59 EST 2004 -->
<TITLE>
OpenJMS 0.7.6.1 API: Class  Messages
</TITLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">
</HEAD>
<BODY BGCOLOR="white">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/Messages.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/exolab/jms/messagemgr/MessageQueue.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/exolab/jms/message/MessageSessionIfc.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Messages.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.exolab.jms.persistence</FONT>
<BR>
Class  Messages</H2>
<PRE>
java.lang.Object
  |
  +--<B>org.exolab.jms.persistence.Messages</B>
</PRE>
<HR>
<DL>
<DT>public class <B>Messages</B><DT>extends java.lang.Object</DL>

<P>
This class manages the persistent of message objects. It maintains
 all the SQL for achieving this.
<P>
<DL>
<DT><B>Version: </B><DD>$Revision: 1.24 $ $Date: 2004/01/08 05:55:07 $</DD>
<DT><B>Author: </B><DD><a href="mailto:tma@netspace.net.au">Tim Anderson</a></DD>
<DT><B>See Also: </B><DD><A HREF="../../../../org/exolab/jms/message/MessageImpl.html"><CODE>MessageImpl</CODE></A>, 
<A HREF="../../../../org/exolab/jms/persistence/RDBMSAdapter.html"><CODE>RDBMSAdapter</CODE></A></DL>
<HR>

<P>
<!-- ======== INNER CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->


<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected </CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/persistence/Messages.html#Messages()">Messages</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default constructor does nothing at the moment.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/persistence/Messages.html#add(java.sql.Connection, org.exolab.jms.message.MessageImpl)">add</A></B>(java.sql.Connection&nbsp;connection,
    <A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A>&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add a message to the database, in the context of the specified
 transaction and connection.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/persistence/Messages.html#close()">close</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reset the instance.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/persistence/Messages.html#deserialize(byte[])">deserialize</A></B>(byte[]&nbsp;blob)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the message from a serialized blob</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/persistence/Messages.html#get(java.sql.Connection, java.lang.String)">get</A></B>(java.sql.Connection&nbsp;connection,
    java.lang.String&nbsp;messageId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the message identified by the message Id</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.HashMap</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/persistence/Messages.html#getMessageIds(java.sql.Connection, long, int)">getMessageIds</A></B>(java.sql.Connection&nbsp;connection,
              long&nbsp;time,
              int&nbsp;hint)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieve the specified number of message ids from the database with a
 time greater than that specified.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/persistence/Messages.html#getMessages(java.sql.Connection, java.lang.String, int, long)">getMessages</A></B>(java.sql.Connection&nbsp;connection,
            java.lang.String&nbsp;destination,
            int&nbsp;priority,
            long&nbsp;time)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieve the next set of messages for the specified destination with
 an acceptance time greater or equal to that specified.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/persistence/Messages.html#getNonExpiredMessages(java.sql.Connection, org.exolab.jms.client.JmsDestination)">getNonExpiredMessages</A></B>(java.sql.Connection&nbsp;connection,
                      <A HREF="../../../../org/exolab/jms/client/JmsDestination.html">JmsDestination</A>&nbsp;destination)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieve the message handle for all unexpired messages</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/persistence/Messages.html#getUnprocessedMessages(java.sql.Connection)">getUnprocessedMessages</A></B>(java.sql.Connection&nbsp;connection)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieve a list of unprocessed messages and return them to the client.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../../org/exolab/jms/persistence/Messages.html">Messages</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/persistence/Messages.html#initialise()">initialise</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create an initialise the singleton istance of this class.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../../org/exolab/jms/persistence/Messages.html">Messages</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/persistence/Messages.html#instance()">instance</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a reference to the singleton instance.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/persistence/Messages.html#remove(java.sql.Connection, java.lang.String)">remove</A></B>(java.sql.Connection&nbsp;connection,
       java.lang.String&nbsp;messageId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove a message with the specified identity from the database</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/persistence/Messages.html#removeExpiredMessages(java.sql.Connection)">removeExpiredMessages</A></B>(java.sql.Connection&nbsp;connection)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete all expired messages and associated message handles.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/persistence/Messages.html#removeMessages(java.sql.Connection, java.lang.String)">removeMessages</A></B>(java.sql.Connection&nbsp;connection,
               java.lang.String&nbsp;destination)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete all messages for the given destination</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;byte[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/persistence/Messages.html#serialize(org.exolab.jms.message.MessageImpl)">serialize</A></B>(<A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A>&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the message as a serialized blob</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/persistence/Messages.html#update(java.sql.Connection, org.exolab.jms.message.MessageImpl)">update</A></B>(java.sql.Connection&nbsp;connection,
       <A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A>&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Update the message state in the database.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->


<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="Messages()"><!-- --></A><H3>
Messages</H3>
<PRE>
protected <B>Messages</B>()</PRE>
<DL>
<DD>Default constructor does nothing at the moment.</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="instance()"><!-- --></A><H3>
instance</H3>
<PRE>
public static <A HREF="../../../../org/exolab/jms/persistence/Messages.html">Messages</A> <B>instance</B>()</PRE>
<DL>
<DD>Returns a reference to the singleton instance.
 <p>
 Note that initialise() must have been invoked first for this
 to return a valid instance.<DD><DL>
<DT><B>Returns:</B><DD>Messages            the singleton instance</DL>
</DD>
</DL>
<HR>

<A NAME="initialise()"><!-- --></A><H3>
initialise</H3>
<PRE>
public static <A HREF="../../../../org/exolab/jms/persistence/Messages.html">Messages</A> <B>initialise</B>()</PRE>
<DL>
<DD>Create an initialise the singleton istance of this class.<DD><DL>
<DT><B>Returns:</B><DD>Messages           the singleton instance</DL>
</DD>
</DL>
<HR>

<A NAME="add(java.sql.Connection, org.exolab.jms.message.MessageImpl)"><!-- --></A><H3>
add</H3>
<PRE>
public void <B>add</B>(java.sql.Connection&nbsp;connection,
                <A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A>&nbsp;message)
         throws <A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></PRE>
<DL>
<DD>Add a message to the database, in the context of the specified
 transaction and connection.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>connection</CODE> - - execute on this connection<DD><CODE>message</CODE> - - the message to add<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></CODE> - - an sql related error</DL>
</DD>
</DL>
<HR>

<A NAME="update(java.sql.Connection, org.exolab.jms.message.MessageImpl)"><!-- --></A><H3>
update</H3>
<PRE>
public void <B>update</B>(java.sql.Connection&nbsp;connection,
                   <A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A>&nbsp;message)
            throws <A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></PRE>
<DL>
<DD>Update the message state in the database. This will be called to set
 the message state to processed by the provider<DD><DL>
<DT><B>Parameters:</B><DD><CODE>connection</CODE> - - execute on this connection<DD><CODE>message</CODE> - - the message to update<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></CODE> - - an sql related error</DL>
</DD>
</DL>
<HR>

<A NAME="remove(java.sql.Connection, java.lang.String)"><!-- --></A><H3>
remove</H3>
<PRE>
public void <B>remove</B>(java.sql.Connection&nbsp;connection,
                   java.lang.String&nbsp;messageId)
            throws <A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></PRE>
<DL>
<DD>Remove a message with the specified identity from the database<DD><DL>
<DT><B>Parameters:</B><DD><CODE>connection</CODE> - - execute on this connection<DD><CODE>messageId</CODE> - - the message id of the message to remove<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></CODE> - - an sql related error</DL>
</DD>
</DL>
<HR>

<A NAME="get(java.sql.Connection, java.lang.String)"><!-- --></A><H3>
get</H3>
<PRE>
public <A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A> <B>get</B>(java.sql.Connection&nbsp;connection,
                       java.lang.String&nbsp;messageId)
                throws <A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></PRE>
<DL>
<DD>Return the message identified by the message Id<DD><DL>
<DT><B>Parameters:</B><DD><CODE>connection</CODE> - - execute on this connection<DD><CODE>messageId</CODE> - - id of message to retrieve<DT><B>Returns:</B><DD>MessageImpl - the associated message<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></CODE> - - an sql related error</DL>
</DD>
</DL>
<HR>

<A NAME="removeMessages(java.sql.Connection, java.lang.String)"><!-- --></A><H3>
removeMessages</H3>
<PRE>
public int <B>removeMessages</B>(java.sql.Connection&nbsp;connection,
                          java.lang.String&nbsp;destination)
                   throws <A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></PRE>
<DL>
<DD>Delete all messages for the given destination<DD><DL>
<DT><B>Parameters:</B><DD><CODE>connection</CODE> - - execute on this connection<DD><CODE>messageId</CODE> - - id of message to retrieve<DT><B>Returns:</B><DD>int - the number of messages purged<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></CODE> - - an sql related error</DL>
</DD>
</DL>
<HR>

<A NAME="getMessages(java.sql.Connection, java.lang.String, int, long)"><!-- --></A><H3>
getMessages</H3>
<PRE>
public java.util.Vector <B>getMessages</B>(java.sql.Connection&nbsp;connection,
                                    java.lang.String&nbsp;destination,
                                    int&nbsp;priority,
                                    long&nbsp;time)
                             throws <A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></PRE>
<DL>
<DD>Retrieve the next set of messages for the specified destination with
 an acceptance time greater or equal to that specified. It will retrieve
 around 200 or so messages depending on what is available.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>connection</CODE> - - execute on this connection<DD><CODE>destination</CODE> - - the destination<DD><CODE>priority</CODE> - - the priority of the messages<DD><CODE>time</CODE> - - with timestamp greater or equal to this<DT><B>Returns:</B><DD>Vector - one or more MessageImpl objects<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></CODE> - - if an SQL error occurs</DL>
</DD>
</DL>
<HR>

<A NAME="getMessageIds(java.sql.Connection, long, int)"><!-- --></A><H3>
getMessageIds</H3>
<PRE>
public java.util.HashMap <B>getMessageIds</B>(java.sql.Connection&nbsp;connection,
                                       long&nbsp;time,
                                       int&nbsp;hint)
                                throws <A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></PRE>
<DL>
<DD>Retrieve the specified number of message ids from the database with a
 time greater than that specified. The number of items to retrieve
 is only a hint and does not reflect the number of messages actually
 returned.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>connection</CODE> - - execute on this connection<DD><CODE>time</CODE> - - with timestamp greater than<DD><CODE>hint</CODE> - - an indication of the number of messages to return.<DT><B>Returns:</B><DD>a map of messageId Strings to their creation time<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></CODE> - - if an SQL error occurs</DL>
</DD>
</DL>
<HR>

<A NAME="getUnprocessedMessages(java.sql.Connection)"><!-- --></A><H3>
getUnprocessedMessages</H3>
<PRE>
public java.util.Vector <B>getUnprocessedMessages</B>(java.sql.Connection&nbsp;connection)
                                        throws <A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></PRE>
<DL>
<DD>Retrieve a list of unprocessed messages and return them to the client.
 An unprocessed message has been accepted by the system but not
 processed.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>connection</CODE> - - execute on this connection<DT><B>Returns:</B><DD>Vector - one or more MessageImpl objects<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></CODE> - - if an SQL error occurs</DL>
</DD>
</DL>
<HR>

<A NAME="getNonExpiredMessages(java.sql.Connection, org.exolab.jms.client.JmsDestination)"><!-- --></A><H3>
getNonExpiredMessages</H3>
<PRE>
public java.util.Vector <B>getNonExpiredMessages</B>(java.sql.Connection&nbsp;connection,
                                              <A HREF="../../../../org/exolab/jms/client/JmsDestination.html">JmsDestination</A>&nbsp;destination)
                                       throws <A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></PRE>
<DL>
<DD>Retrieve the message handle for all unexpired messages<DD><DL>
<DT><B>Parameters:</B><DD><CODE>connection</CODE> - - execute on this connection<DD><CODE>destination</CODE> - - the destination in question<DT><B>Returns:</B><DD>Vector - collection of PersistentMessageHandle objects<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></CODE> - - sql releated exception</DL>
</DD>
</DL>
<HR>

<A NAME="removeExpiredMessages(java.sql.Connection)"><!-- --></A><H3>
removeExpiredMessages</H3>
<PRE>
public void <B>removeExpiredMessages</B>(java.sql.Connection&nbsp;connection)
                           throws <A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></PRE>
<DL>
<DD>Delete all expired messages and associated message handles.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>connection</CODE> - - execute on this connection<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></CODE> - - if an SQL error occurs</DL>
</DD>
</DL>
<HR>

<A NAME="close()"><!-- --></A><H3>
close</H3>
<PRE>
public void <B>close</B>()</PRE>
<DL>
<DD>Reset the instance. We need to deprecate this method since this
 class does not contain state information</DL>
<HR>

<A NAME="serialize(org.exolab.jms.message.MessageImpl)"><!-- --></A><H3>
serialize</H3>
<PRE>
public byte[] <B>serialize</B>(<A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A>&nbsp;message)
                 throws <A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></PRE>
<DL>
<DD>Get the message as a serialized blob<DD><DL>
<DT><B>Parameters:</B><DD><CODE>message</CODE> - the message to serialize<DT><B>Returns:</B><DD>byte[]              the serialized message</DL>
</DD>
</DL>
<HR>

<A NAME="deserialize(byte[])"><!-- --></A><H3>
deserialize</H3>
<PRE>
public <A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A> <B>deserialize</B>(byte[]&nbsp;blob)
                        throws <A HREF="../../../../org/exolab/jms/persistence/PersistenceException.html">PersistenceException</A></PRE>
<DL>
<DD>Set the message from a serialized blob<DD><DL>
<DT><B>Parameters:</B><DD><CODE>blob</CODE> - the serialized message<DT><B>Returns:</B><DD>the re-constructed message</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_bottom"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/Messages.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/exolab/jms/messagemgr/MessageQueue.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/exolab/jms/message/MessageSessionIfc.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Messages.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
Copyright &copy; 1999-2004 The OpenJMS Group. All Rights Reserved.
</BODY>
</HTML>
