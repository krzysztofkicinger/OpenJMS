<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Fri May 07 18:37:56 EST 2004 -->
<TITLE>
OpenJMS 0.7.6.1 API: Class  DestinationCache
</TITLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">
</HEAD>
<BODY BGCOLOR="white">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/DestinationCache.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/exolab/jms/message/DeliveryModeImpl.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/exolab/jms/messagemgr/DestinationCacheEventListener.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DestinationCache.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.exolab.jms.messagemgr</FONT>
<BR>
Class  DestinationCache</H2>
<PRE>
java.lang.Object
  |
  +--<B>org.exolab.jms.messagemgr.DestinationCache</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../org/exolab/jms/gc/GarbageCollectable.html">GarbageCollectable</A>, <A HREF="../../../../org/exolab/jms/Identifiable.html">Identifiable</A>, <A HREF="../../../../org/exolab/jms/lease/LeaseEventListenerIfc.html">LeaseEventListenerIfc</A>, <A HREF="../../../../org/exolab/jms/messagemgr/MessageManagerEventListener.html">MessageManagerEventListener</A>, java.io.Serializable</DD>
</DL>
<DL>
<DT><B>Direct Known Subclasses:</B> <DD><A HREF="../../../../org/exolab/jms/messagemgr/QueueDestinationCache.html">QueueDestinationCache</A>, <A HREF="../../../../org/exolab/jms/messagemgr/TopicDestinationCache.html">TopicDestinationCache</A></DD>
</DL>
<HR>
<DL>
<DT>public abstract class <B>DestinationCache</B><DT>extends java.lang.Object<DT>implements <A HREF="../../../../org/exolab/jms/messagemgr/MessageManagerEventListener.html">MessageManagerEventListener</A>, <A HREF="../../../../org/exolab/jms/Identifiable.html">Identifiable</A>, <A HREF="../../../../org/exolab/jms/lease/LeaseEventListenerIfc.html">LeaseEventListenerIfc</A>, <A HREF="../../../../org/exolab/jms/gc/GarbageCollectable.html">GarbageCollectable</A></DL>

<P>
A DestinationCache is used to cache messages for a particular destination. 
 <p>
 It implements <A HREF="../../../../org/exolab/jms/messagemgr/MessageManagerEventListener.html"><CODE>MessageManagerEventListener</CODE></A> in order to be notified
 of messages being added to and removed from 
 <A HREF="../../../../org/exolab/jms/messagemgr/MessageMgr.html"><CODE>MessageMgr</CODE></A>
 <p>
 A <A HREF="../../../../org/exolab/jms/messagemgr/ConsumerEndpoint.html"><CODE>ConsumerEndpoint</CODE></A> registers with a <A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html"><CODE>DestinationCache</CODE></A> to
 receive messages for a particular destination.
 <p>
 In all instances this class doesn't deal with <code>Message</code> objects
 directly, but instead uses their corresponding <A HREF="../../../../org/exolab/jms/message/MessageHandle.html"><CODE>MessageHandle</CODE></A>,
 which is far more lightweight.
 <p>
 A two level cache is used to facilitate quick seeding of registered
 consumers and quick per-consumer-acknowledgment strategy. The two level
 cache includes this, the DestinationCache, at the highest level and then
 <A HREF="../../../../org/exolab/jms/messagemgr/ConsumerManager.html"><CODE>ConsumerManager</CODE></A> at the lowest level.
 <p>
 In addition to registering <A HREF="../../../../org/exolab/jms/messagemgr/ConsumerEndpoint.html"><CODE>ConsumerEndpoint</CODE></A> objects the cache also
 supports <A HREF="../../../../org/exolab/jms/messagemgr/DestinationCacheEventListener.html"><CODE>DestinationCacheEventListener</CODE></A>s. A listener will be 
 notified when messages are added to the cache but do not actually consume 
 messages. A cache can have one or more registered listeners. This feature is
 predominately used by browsers or iterators of destinations.
 <p>
 Clients can also become lifecycle listeners for this object to get notified
 during initialization and shutdwon.
 <p>
 This cache is ordered on priority.
<P>
<DL>
<DT><B>Version: </B><DD>$Revision: 1.34 $ $Date: 2003/12/29 13:09:15 $</DD>
<DT><B>Author: </B><DD><a href="mailto:jima@exoffice.com">Jim Alateras</a></DD>
<DT><B>See Also: </B><DD><A HREF="../../../../serialized-form.html#org.exolab.jms.messagemgr.DestinationCache">Serialized Form</A></DL>
<HR>

<P>
<!-- ======== INNER CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Field Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.List</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#_consumers">_consumers</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is the list of consumers that have subscribed to this cache.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../org/exolab/jms/messagemgr/MessageLeaseHelper.html">MessageLeaseHelper</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#_leaseHelper">_leaseHelper</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The message lease helper is used to manage leases for messages
 cached by the destination</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->


<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>abstract &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#canDestroy()">canDestroy</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines if this cache can be destroyed</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#collectGarbage(boolean)">collectGarbage</A></B>(boolean&nbsp;aggressive)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Perform any garbage collection on this resource.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Iterator</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#getConsumers()">getConsumers</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return an enmeration of all consumers attached to this cache.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>abstract &nbsp;<A HREF="../../../../org/exolab/jms/client/JmsDestination.html">JmsDestination</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#getDestination()">getDestination</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return a reference to the underlying destination</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#getDestinationByName()">getDestinationByName</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the string form of the destination</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#getId()">getId</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the identity of the object</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#getMaximumSize()">getMaximumSize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the cache's maximum size</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#getMessageCount()">getMessageCount</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the number of messages currently active for this destination</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>abstract &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#messageAdded(org.exolab.jms.client.JmsDestination, org.exolab.jms.message.MessageImpl)">messageAdded</A></B>(<A HREF="../../../../org/exolab/jms/client/JmsDestination.html">JmsDestination</A>&nbsp;destination,
             <A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A>&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is called when the <A HREF="../../../../org/exolab/jms/messagemgr/MessageMgr.html"><CODE>MessageMgr</CODE></A> adds a message
 for this destination to the cache</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>abstract &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#messageRemoved(org.exolab.jms.client.JmsDestination, org.exolab.jms.message.MessageImpl)">messageRemoved</A></B>(<A HREF="../../../../org/exolab/jms/client/JmsDestination.html">JmsDestination</A>&nbsp;destination,
               <A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A>&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is called when the <A HREF="../../../../org/exolab/jms/messagemgr/MessageMgr.html"><CODE>MessageMgr</CODE></A> removes a
 message from the cache.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#onLeaseExpired(java.lang.Object)">onLeaseExpired</A></B>(java.lang.Object&nbsp;leasedObject)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is called whenever a lease expires.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#registerConsumer(org.exolab.jms.messagemgr.ConsumerEndpoint)">registerConsumer</A></B>(<A HREF="../../../../org/exolab/jms/messagemgr/ConsumerEndpoint.html">ConsumerEndpoint</A>&nbsp;consumer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Register a consumer with this cache.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#resolveExpiredMessage(org.exolab.jms.message.MessageHandle)">resolveExpiredMessage</A></B>(<A HREF="../../../../org/exolab/jms/message/MessageHandle.html">MessageHandle</A>&nbsp;handle)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Resolve an expired message through its handle</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#setCacheEvictionPolicy(org.exolab.jms.messagemgr.CacheEvictionPolicy)">setCacheEvictionPolicy</A></B>(<A HREF="../../../../org/exolab/jms/messagemgr/CacheEvictionPolicy.html">CacheEvictionPolicy</A>&nbsp;policy)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the <A HREF="../../../../org/exolab/jms/messagemgr/CacheEvictionPolicy.html"><CODE>CacheEvictionPolicy</CODE></A> for this object.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#setMaximumSize(int)">setMaximumSize</A></B>(int&nbsp;size)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the maximum size of the cache.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#shutdown()">shutdown</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Close the cache and unregister all the consumers.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/DestinationCache.html#unregisterConsumer(org.exolab.jms.messagemgr.ConsumerEndpoint)">unregisterConsumer</A></B>(<A HREF="../../../../org/exolab/jms/messagemgr/ConsumerEndpoint.html">ConsumerEndpoint</A>&nbsp;consumer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove the consumer for the list of registered consumers.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.exolab.jms.messagemgr.MessageManagerEventListener"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from interface org.exolab.jms.messagemgr.<A HREF="../../../../org/exolab/jms/messagemgr/MessageManagerEventListener.html">MessageManagerEventListener</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/exolab/jms/messagemgr/MessageManagerEventListener.html#persistentMessageAdded(java.sql.Connection, org.exolab.jms.client.JmsDestination, org.exolab.jms.message.MessageImpl)">persistentMessageAdded</A>, <A HREF="../../../../org/exolab/jms/messagemgr/MessageManagerEventListener.html#persistentMessageRemoved(java.sql.Connection, org.exolab.jms.client.JmsDestination, org.exolab.jms.message.MessageImpl)">persistentMessageRemoved</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Field Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="_consumers"><!-- --></A><H3>
_consumers</H3>
<PRE>
protected java.util.List <B>_consumers</B></PRE>
<DL>
<DD>This is the list of consumers that have subscribed to this cache. It
 hosts both durable and transient subscribers</DL>
<HR>

<A NAME="_leaseHelper"><!-- --></A><H3>
_leaseHelper</H3>
<PRE>
protected <A HREF="../../../../org/exolab/jms/messagemgr/MessageLeaseHelper.html">MessageLeaseHelper</A> <B>_leaseHelper</B></PRE>
<DL>
<DD>The message lease helper is used to manage leases for messages
 cached by the destination</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->


<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="setMaximumSize(int)"><!-- --></A><H3>
setMaximumSize</H3>
<PRE>
public void <B>setMaximumSize</B>(int&nbsp;size)</PRE>
<DL>
<DD>Set the maximum size of the cache. If there are more than this number
 of messages in the cache the <A HREF="../../../../org/exolab/jms/messagemgr/CacheEvictionPolicy.html"><CODE>CacheEvictionPolicy</CODE></A> is enforced
 to remove messages.<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>size</CODE> - - maximum number of messages a destination can hold</DL>
</DD>
</DL>
<HR>

<A NAME="getMaximumSize()"><!-- --></A><H3>
getMaximumSize</H3>
<PRE>
public int <B>getMaximumSize</B>()</PRE>
<DL>
<DD>Return the cache's maximum size<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Returns:</B><DD>int - size of cache</DL>
</DD>
</DL>
<HR>

<A NAME="getDestination()"><!-- --></A><H3>
getDestination</H3>
<PRE>
public abstract <A HREF="../../../../org/exolab/jms/client/JmsDestination.html">JmsDestination</A> <B>getDestination</B>()</PRE>
<DL>
<DD>Return a reference to the underlying destination<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Returns:</B><DD>JmsDestination</DL>
</DD>
</DL>
<HR>

<A NAME="getDestinationByName()"><!-- --></A><H3>
getDestinationByName</H3>
<PRE>
public java.lang.String <B>getDestinationByName</B>()</PRE>
<DL>
<DD>Return the string form of the destination<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Returns:</B><DD>String</DL>
</DD>
</DL>
<HR>

<A NAME="setCacheEvictionPolicy(org.exolab.jms.messagemgr.CacheEvictionPolicy)"><!-- --></A><H3>
setCacheEvictionPolicy</H3>
<PRE>
public void <B>setCacheEvictionPolicy</B>(<A HREF="../../../../org/exolab/jms/messagemgr/CacheEvictionPolicy.html">CacheEvictionPolicy</A>&nbsp;policy)</PRE>
<DL>
<DD>Set the <A HREF="../../../../org/exolab/jms/messagemgr/CacheEvictionPolicy.html"><CODE>CacheEvictionPolicy</CODE></A> for this object. This determines
 how messages are removed when the cache's upper limit is reached.<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>policy</CODE> - the eviction policy</DL>
</DD>
</DL>
<HR>

<A NAME="registerConsumer(org.exolab.jms.messagemgr.ConsumerEndpoint)"><!-- --></A><H3>
registerConsumer</H3>
<PRE>
public boolean <B>registerConsumer</B>(<A HREF="../../../../org/exolab/jms/messagemgr/ConsumerEndpoint.html">ConsumerEndpoint</A>&nbsp;consumer)</PRE>
<DL>
<DD>Register a consumer with this cache. Part of the registration process
 will be to seed the <A HREF="../../../../org/exolab/jms/messagemgr/ConsumerEndpoint.html"><CODE>ConsumerEndpoint</CODE></A> with an initial list of
 messages that it needs to consume and then feed messages to it through
 the specified listener object.
 <p>
 Messages are subsequently passed down to the consumer's through the
 listener, as they enter the DestinationCache.<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>consumer</CODE> - - message consumer for this destination<DT><B>Returns:</B><DD>boolean - true if registered and false otherwise</DL>
</DD>
</DL>
<HR>

<A NAME="unregisterConsumer(org.exolab.jms.messagemgr.ConsumerEndpoint)"><!-- --></A><H3>
unregisterConsumer</H3>
<PRE>
public void <B>unregisterConsumer</B>(<A HREF="../../../../org/exolab/jms/messagemgr/ConsumerEndpoint.html">ConsumerEndpoint</A>&nbsp;consumer)</PRE>
<DL>
<DD>Remove the consumer for the list of registered consumers. If the
 consumer does not exist then the call fails silently.<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>consumer</CODE> - - consumer to remove.</DL>
</DD>
</DL>
<HR>

<A NAME="getConsumers()"><!-- --></A><H3>
getConsumers</H3>
<PRE>
public java.util.Iterator <B>getConsumers</B>()</PRE>
<DL>
<DD>Return an enmeration of all consumers attached to this cache.<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Returns:</B><DD>Iterator - list of registered consumers</DL>
</DD>
</DL>
<HR>

<A NAME="messageAdded(org.exolab.jms.client.JmsDestination, org.exolab.jms.message.MessageImpl)"><!-- --></A><H3>
messageAdded</H3>
<PRE>
public abstract boolean <B>messageAdded</B>(<A HREF="../../../../org/exolab/jms/client/JmsDestination.html">JmsDestination</A>&nbsp;destination,
                                     <A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A>&nbsp;message)</PRE>
<DL>
<DD>This method is called when the <A HREF="../../../../org/exolab/jms/messagemgr/MessageMgr.html"><CODE>MessageMgr</CODE></A> adds a message
 for this destination to the cache<DD><DL>
<DT><B>Specified by: </B><DD><CODE><A HREF="../../../../org/exolab/jms/messagemgr/MessageManagerEventListener.html#messageAdded(org.exolab.jms.client.JmsDestination, org.exolab.jms.message.MessageImpl)">messageAdded</A></CODE> in interface <CODE><A HREF="../../../../org/exolab/jms/messagemgr/MessageManagerEventListener.html">MessageManagerEventListener</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>message</CODE> - - message added to cache</DL>
</DD>
</DL>
<HR>

<A NAME="messageRemoved(org.exolab.jms.client.JmsDestination, org.exolab.jms.message.MessageImpl)"><!-- --></A><H3>
messageRemoved</H3>
<PRE>
public abstract void <B>messageRemoved</B>(<A HREF="../../../../org/exolab/jms/client/JmsDestination.html">JmsDestination</A>&nbsp;destination,
                                    <A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A>&nbsp;message)</PRE>
<DL>
<DD>This method is called when the <A HREF="../../../../org/exolab/jms/messagemgr/MessageMgr.html"><CODE>MessageMgr</CODE></A> removes a
 message from the cache.<DD><DL>
<DT><B>Specified by: </B><DD><CODE><A HREF="../../../../org/exolab/jms/messagemgr/MessageManagerEventListener.html#messageRemoved(org.exolab.jms.client.JmsDestination, org.exolab.jms.message.MessageImpl)">messageRemoved</A></CODE> in interface <CODE><A HREF="../../../../org/exolab/jms/messagemgr/MessageManagerEventListener.html">MessageManagerEventListener</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>message</CODE> - - message removed from cache</DL>
</DD>
</DL>
<HR>

<A NAME="getMessageCount()"><!-- --></A><H3>
getMessageCount</H3>
<PRE>
public int <B>getMessageCount</B>()</PRE>
<DL>
<DD>Return the number of messages currently active for this destination<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Returns:</B><DD>int - number of active messages</DL>
</DD>
</DL>
<HR>

<A NAME="onLeaseExpired(java.lang.Object)"><!-- --></A><H3>
onLeaseExpired</H3>
<PRE>
public void <B>onLeaseExpired</B>(java.lang.Object&nbsp;leasedObject)</PRE>
<DL>
<DD>This method is called whenever a lease expires. It passes the
 object that has expired.<DD><DL>
<DT><B>Specified by: </B><DD><CODE><A HREF="../../../../org/exolab/jms/lease/LeaseEventListenerIfc.html#onLeaseExpired(java.lang.Object)">onLeaseExpired</A></CODE> in interface <CODE><A HREF="../../../../org/exolab/jms/lease/LeaseEventListenerIfc.html">LeaseEventListenerIfc</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>leasedObject</CODE> - reference to the leased object</DL>
</DD>
</DL>
<HR>

<A NAME="canDestroy()"><!-- --></A><H3>
canDestroy</H3>
<PRE>
public abstract boolean <B>canDestroy</B>()</PRE>
<DL>
<DD>Determines if this cache can be destroyed<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Returns:</B><DD><code>true</code> if the cache can be destroyed, otherwise
 <code>false</code></DL>
</DD>
</DL>
<HR>

<A NAME="shutdown()"><!-- --></A><H3>
shutdown</H3>
<PRE>
public void <B>shutdown</B>()</PRE>
<DL>
<DD>Close the cache and unregister all the consumers. Notify any and all
 DestinationCacheLifecycleListeners.
 <p>
 Once the cache is closed it will no longger receive messages for this
 destination.<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getId()"><!-- --></A><H3>
getId</H3>
<PRE>
public java.lang.String <B>getId</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/exolab/jms/Identifiable.html">Identifiable</A></CODE></B></DD>
<DD>Return the identity of the object<DD><DL>
<DT><B>Specified by: </B><DD><CODE><A HREF="../../../../org/exolab/jms/Identifiable.html#getId()">getId</A></CODE> in interface <CODE><A HREF="../../../../org/exolab/jms/Identifiable.html">Identifiable</A></CODE></DL>
</DD>
<DD>Following copied from interface: <CODE>org.exolab.jms.Identifiable</CODE></DD>
<DD><DL>
<DT><B>Returns:</B><DD>the object identity</DL>
</DD>
</DL>
<HR>

<A NAME="collectGarbage(boolean)"><!-- --></A><H3>
collectGarbage</H3>
<PRE>
public void <B>collectGarbage</B>(boolean&nbsp;aggressive)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/exolab/jms/gc/GarbageCollectable.html">GarbageCollectable</A></CODE></B></DD>
<DD>Perform any garbage collection on this resource. This will have the
 effect of releasing system resources.  If the 'aggressive' flag is
 set to true then the garbage collection should do more to release
 memory related resources since it is called when the application
 memory is low.<DD><DL>
<DT><B>Specified by: </B><DD><CODE><A HREF="../../../../org/exolab/jms/gc/GarbageCollectable.html#collectGarbage(boolean)">collectGarbage</A></CODE> in interface <CODE><A HREF="../../../../org/exolab/jms/gc/GarbageCollectable.html">GarbageCollectable</A></CODE></DL>
</DD>
<DD>Following copied from interface: <CODE>org.exolab.jms.gc.GarbageCollectable</CODE></DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>aggressive</CODE> - - true for aggressive garbage collection</DL>
</DD>
</DL>
<HR>

<A NAME="resolveExpiredMessage(org.exolab.jms.message.MessageHandle)"><!-- --></A><H3>
resolveExpiredMessage</H3>
<PRE>
protected <A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A> <B>resolveExpiredMessage</B>(<A HREF="../../../../org/exolab/jms/message/MessageHandle.html">MessageHandle</A>&nbsp;handle)</PRE>
<DL>
<DD>Resolve an expired message through its handle<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>handle</CODE> - the expired message's handle<DT><B>Returns:</B><DD>the expired message. May be null.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_bottom"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/DestinationCache.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/exolab/jms/message/DeliveryModeImpl.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/exolab/jms/messagemgr/DestinationCacheEventListener.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DestinationCache.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
Copyright &copy; 1999-2004 The OpenJMS Group. All Rights Reserved.
</BODY>
</HTML>
