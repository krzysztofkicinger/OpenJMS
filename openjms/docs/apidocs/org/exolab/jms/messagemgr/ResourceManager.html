<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Fri May 07 18:38:00 EST 2004 -->
<TITLE>
OpenJMS 0.7.6.1 API: Class  ResourceManager
</TITLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">
</HEAD>
<BODY BGCOLOR="white">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/ResourceManager.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/exolab/jms/server/rmi/RemoteJmsServerSessionIfc.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/exolab/jms/messagemgr/ResourceManagerException.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ResourceManager.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.exolab.jms.messagemgr</FONT>
<BR>
Class  ResourceManager</H2>
<PRE>
java.lang.Object
  |
  +--org.exolab.core.service.Service
        |
        +--org.exolab.core.service.BasicService
              |
              +--<B>org.exolab.jms.messagemgr.ResourceManager</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD>java.lang.Runnable, java.io.Serializable, org.exolab.core.service.Serviceable</DD>
</DL>
<HR>
<DL>
<DT>public class <B>ResourceManager</B><DT>extends org.exolab.core.service.BasicService</DL>

<P>
The resource manager provides XA support for the JMS Server.
 <p>
 The resource manager is responsible for managing the various transaction
 identifiers and managing the association between transaction ids and
 connections.
 <p>
 The resource manager will store the global XID's and their state in the
 database for recovery purposes.
 <p>
 Messages that arrive, and are associated with an XID are not processed
 through the <A HREF="../../../../org/exolab/jms/messagemgr/MessageMgr.html"><CODE>MessageMgr</CODE></A>. Instead they are routed to this resource
 managers where they are cached until the associated XID is committed or
 rolled back. If the transaction is successfully committed, through the 2PC
 protocol the messages will pass through the system.
 <p>
 Similarly, messages that are sent to consumers, either synchronously or
 asynchronously are also cached by the resource manager until the global
 transaction completes.
 <p>
 On startup the resource manager will read all incomplete transactions, which
 are incompleted into memory. It will then process trnasactions that have
 timed out.
 <p>
 The transaction manager will call the <A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#recover(int)"><CODE>recover(int)</CODE></A> method  and obtain a
 list of incomplete transaction for the purpose of completing them where
 possible.
<P>
<DL>
<DT><B>Version: </B><DD>$Revision: 1.6 $ $Date: 2003/08/17 01:32:25 $</DD>
<DT><B>Author: </B><DD><a href="mailto:jima@intalio.com">Jim Alateras</a></DD>
<DT><B>See Also: </B><DD><A HREF="../../../../serialized-form.html#org.exolab.jms.messagemgr.ResourceManager">Serialized Form</A></DL>
<HR>

<P>
<!-- ======== INNER CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Field Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#GC_ASYNCHRONOUS">GC_ASYNCHRONOUS</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Asynchronous garbage collection is used to remove processed log files
 asynchronous (i.e in a different thread context).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#GC_DISABLED">GC_DISABLED</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is used to indicate the garbage collection has been disabled and
 that the client will take responsibility for all aspects of log file
 management.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#GC_SYNCHRONOUS">GC_SYNCHRONOUS</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Synchronous gabrage collection is used to remove processed log files
 when the last trnasaction, in that log file, has been successfully
 processed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#RM_LOGFILE_EXTENSION">RM_LOGFILE_EXTENSION</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The extension for all transaction log files</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#ResourceManager(java.lang.String)">ResourceManager</A></B>(java.lang.String&nbsp;dir)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Construct a resource manager using the specified directory, which
 must already exist.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#buildLogFileList()">buildLogFileList</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Build a list of all log files in the specified log directory</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#commit(javax.transaction.xa.Xid, boolean)">commit</A></B>(javax.transaction.xa.Xid&nbsp;id,
       boolean&nbsp;onePhase)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure that a transaction with the specified xid is currently active.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../org/exolab/jms/tranlog/TransactionLog.html">TransactionLog</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#createNextTransactionLog()">createNextTransactionLog</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create the next <A HREF="../../../../org/exolab/jms/tranlog/TransactionLog.html"><CODE>TransactionLog</CODE></A> and add it to the list of
 managed transaction logs.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#end(javax.transaction.xa.Xid, int)">end</A></B>(javax.transaction.xa.Xid&nbsp;id,
    int&nbsp;flags)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ends the work performed on behalf of a transaction branch.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#forget(javax.transaction.xa.Xid)">forget</A></B>(javax.transaction.xa.Xid&nbsp;id)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tell the resource manager to forget about a heuristically completed
 transaction branch.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#garbageCollect()">garbageCollect</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is the entry point for the garbage collection callback.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#gcDisabled()">gcDisabled</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check whether garbage collection has been disabled</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#getGCMode()">getGCMode</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the garbage collection mode for the resource manager</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#getLogDirectory()">getLogDirectory</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieve the name of the log directory</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#getLogFileSize()">getLogFileSize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the maximum size that each log file can grow too.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#getResourceManagerId()">getResourceManagerId</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the resource manager identity</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#getSequenceNumber(java.lang.String)">getSequenceNumber</A></B>(java.lang.String&nbsp;name)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the sequence number of the file
 files are associated with a unique number</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.Object[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#getTransactionRecords(org.exolab.jms.tranlog.ExternalXid, java.lang.String)">getTransactionRecords</A></B>(<A HREF="../../../../org/exolab/jms/tranlog/ExternalXid.html">ExternalXid</A>&nbsp;xid,
                      java.lang.String&nbsp;rid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return an arrya of records, both state and date, for the specified
 global transaction</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#getTransactionTimeout()">getTransactionTimeout</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the transaction timeout for this instance of the resource
 manager.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html">ResourceManager</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#instance()">instance</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the singleton instance of the ResourceManager</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#isSameRM(javax.transaction.xa.XAResource)">isSameRM</A></B>(javax.transaction.xa.XAResource&nbsp;xares)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ask the resource manager to prepare for a transaction commit of the
 transaction specified in xid</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#logPublishedMessage(javax.transaction.xa.Xid, org.exolab.jms.message.MessageImpl)">logPublishedMessage</A></B>(javax.transaction.xa.Xid&nbsp;xid,
                    <A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A>&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log this published message so that it can be passed through the system
 when the associated global transaction commits.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#logReceivedMessage(javax.transaction.xa.Xid, java.lang.String, org.exolab.jms.message.MessageHandle)">logReceivedMessage</A></B>(javax.transaction.xa.Xid&nbsp;xid,
                   java.lang.String&nbsp;id,
                   <A HREF="../../../../org/exolab/jms/message/MessageHandle.html">MessageHandle</A>&nbsp;handle)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log that this message handle was sent to the consumer within the specified
 global transaction identity.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#logTransactionState(javax.transaction.xa.Xid, org.exolab.jms.tranlog.TransactionState)">logTransactionState</A></B>(javax.transaction.xa.Xid&nbsp;xid,
                    <A HREF="../../../../org/exolab/jms/tranlog/TransactionState.html">TransactionState</A>&nbsp;state)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add an <A HREF="../../../../org/exolab/jms/tranlog/StateTransactionLogEntry.html"><CODE>StateTransactionLogEntry</CODE></A> using the specified txid,
 rid and state</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#prepare(javax.transaction.xa.Xid)">prepare</A></B>(javax.transaction.xa.Xid&nbsp;id)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Obtain a list of prepared transaction branches from a resource manager.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;javax.transaction.xa.Xid[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#recover(int)">recover</A></B>(int&nbsp;flag)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inform the resource manager to roll back work done on behalf of a
 transaction branch</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#rollback(javax.transaction.xa.Xid)">rollback</A></B>(javax.transaction.xa.Xid&nbsp;id)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the current transaction timeout value for this XAResource instance.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#run()">run</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#setGCMode(int)">setGCMode</A></B>(int&nbsp;mode)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the GC mode for the resource manager.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#setLogDirectory(java.lang.String)">setLogDirectory</A></B>(java.lang.String&nbsp;dir)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the log directory.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#setLogFileSize(int)">setLogFileSize</A></B>(int&nbsp;size)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the maximum size of each log file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#setTransactionTimeout(int)">setTransactionTimeout</A></B>(int&nbsp;seconds)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Start work on behalf of a transaction branch specified in xid If TMJOIN
 is specified, the start is for joining a transaction previously seen by
 the resource manager</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#start()">start</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#start(javax.transaction.xa.Xid, int)">start</A></B>(javax.transaction.xa.Xid&nbsp;id,
      int&nbsp;flags)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html#stop()">stop</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.exolab.core.service.BasicService"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class org.exolab.core.service.BasicService</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>toString</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.exolab.core.service.Service"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class org.exolab.core.service.Service</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>getName, getState, restart, setState</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Field Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="RM_LOGFILE_EXTENSION"><!-- --></A><H3>
RM_LOGFILE_EXTENSION</H3>
<PRE>
public static final java.lang.String <B>RM_LOGFILE_EXTENSION</B></PRE>
<DL>
<DD>The extension for all transaction log files</DL>
<HR>

<A NAME="GC_DISABLED"><!-- --></A><H3>
GC_DISABLED</H3>
<PRE>
public static final int <B>GC_DISABLED</B></PRE>
<DL>
<DD>This is used to indicate the garbage collection has been disabled and
 that the client will take responsibility for all aspects of log file
 management. This is useful in situations where the client wants to
 archive the transaction log files
 <p>
 This is the default mode for GC.</DL>
<HR>

<A NAME="GC_SYNCHRONOUS"><!-- --></A><H3>
GC_SYNCHRONOUS</H3>
<PRE>
public static final int <B>GC_SYNCHRONOUS</B></PRE>
<DL>
<DD>Synchronous gabrage collection is used to remove processed log files
 when the last trnasaction, in that log file, has been successfully
 processed. This is more efficient means since the log files does not
 need to be scanned asynchronously to determine whether all the
 transactions have been processed.</DL>
<HR>

<A NAME="GC_ASYNCHRONOUS"><!-- --></A><H3>
GC_ASYNCHRONOUS</H3>
<PRE>
public static final int <B>GC_ASYNCHRONOUS</B></PRE>
<DL>
<DD>Asynchronous garbage collection is used to remove processed log files
 asynchronous (i.e in a different thread context). This is rather
 expensive since it must manually scan each log file and determine
 whether all transactions, in that file, have been closed. If this is
 the case then it will remove the log file.</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="ResourceManager(java.lang.String)"><!-- --></A><H3>
ResourceManager</H3>
<PRE>
public <B>ResourceManager</B>(java.lang.String&nbsp;dir)
                throws <A HREF="../../../../org/exolab/jms/messagemgr/ResourceManagerException.html">ResourceManagerException</A></PRE>
<DL>
<DD>Construct a resource manager using the specified directory, which
 must already exist. If the directory does not exist or there is
 no permisssion to access it then throw a ResourceManagerException<DD><DL>
<DT><B>Parameters:</B><DD><CODE>dir</CODE> - - the base directory<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManagerException.html">ResourceManagerException</A></CODE> - &nbsp;</DL>
</DD>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="instance()"><!-- --></A><H3>
instance</H3>
<PRE>
public static <A HREF="../../../../org/exolab/jms/messagemgr/ResourceManager.html">ResourceManager</A> <B>instance</B>()
                                throws <A HREF="../../../../org/exolab/jms/messagemgr/ResourceManagerException.html">ResourceManagerException</A></PRE>
<DL>
<DD>Return the singleton instance of the ResourceManager<DD><DL>
<DT><B>Returns:</B><DD>ResourceManager<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManagerException.html">ResourceManagerException</A></CODE> - &nbsp;</DL>
</DD>
</DL>
<HR>

<A NAME="setLogDirectory(java.lang.String)"><!-- --></A><H3>
setLogDirectory</H3>
<PRE>
public void <B>setLogDirectory</B>(java.lang.String&nbsp;dir)
                     throws java.lang.IllegalArgumentException</PRE>
<DL>
<DD>Set the log directory. This is the directory where all the log files
 are stored<DD><DL>
<DT><B>Parameters:</B><DD><CODE>dir</CODE> - - the name of the directory (absolute or relative)<DT><B>Throws:</B><DD><CODE>java.lang.IllegalArgumentException</CODE> - if the string is not a directory</DL>
</DD>
</DL>
<HR>

<A NAME="getLogDirectory()"><!-- --></A><H3>
getLogDirectory</H3>
<PRE>
public java.lang.String <B>getLogDirectory</B>()</PRE>
<DL>
<DD>Retrieve the name of the log directory<DD><DL>
<DT><B>Returns:</B><DD>String - log dir name</DL>
</DD>
</DL>
<HR>

<A NAME="setLogFileSize(int)"><!-- --></A><H3>
setLogFileSize</H3>
<PRE>
public void <B>setLogFileSize</B>(int&nbsp;size)</PRE>
<DL>
<DD>Set the maximum size of each log file. When this size is reached a
 new log file is created. The size of the log file can be changed
 dynamically during runtime. If it is not specified it will default
 to 1MB.
 <p>
 The size is specified in bytes<DD><DL>
<DT><B>Parameters:</B><DD><CODE>size</CODE> - - the max size of each log file</DL>
</DD>
</DL>
<HR>

<A NAME="getLogFileSize()"><!-- --></A><H3>
getLogFileSize</H3>
<PRE>
public int <B>getLogFileSize</B>()</PRE>
<DL>
<DD>Return the maximum size that each log file can grow too.<DD><DL>
<DT><B>Returns:</B><DD>int - log file size</DL>
</DD>
</DL>
<HR>

<A NAME="setGCMode(int)"><!-- --></A><H3>
setGCMode</H3>
<PRE>
public boolean <B>setGCMode</B>(int&nbsp;mode)</PRE>
<DL>
<DD>Set the GC mode for the resource manager. Valid values are GC_SYNCHRONOUS,
 GC_ASYNCHRONOUS and GC_DISABLED.
 <p><DD><DL>
<DT><B>Parameters:</B><DD><CODE>mode</CODE> - - one of GC_*<DT><B>Returns:</B><DD>boolean - if the specified mode has been correctly set</DL>
</DD>
</DL>
<HR>

<A NAME="getGCMode()"><!-- --></A><H3>
getGCMode</H3>
<PRE>
public int <B>getGCMode</B>()</PRE>
<DL>
<DD>Return the garbage collection mode for the resource manager<DD><DL>
<DT><B>Returns:</B><DD>int</DL>
</DD>
</DL>
<HR>

<A NAME="gcDisabled()"><!-- --></A><H3>
gcDisabled</H3>
<PRE>
public boolean <B>gcDisabled</B>()</PRE>
<DL>
<DD>Check whether garbage collection has been disabled<DD><DL>
<DT><B>Returns:</B><DD>boolean - true if gc is disabled</DL>
</DD>
</DL>
<HR>

<A NAME="logPublishedMessage(javax.transaction.xa.Xid, org.exolab.jms.message.MessageImpl)"><!-- --></A><H3>
logPublishedMessage</H3>
<PRE>
public void <B>logPublishedMessage</B>(javax.transaction.xa.Xid&nbsp;xid,
                                <A HREF="../../../../org/exolab/jms/message/MessageImpl.html">MessageImpl</A>&nbsp;message)
                         throws <A HREF="../../../../org/exolab/jms/tranlog/TransactionLogException.html">TransactionLogException</A>,
                                <A HREF="../../../../org/exolab/jms/messagemgr/ResourceManagerException.html">ResourceManagerException</A>,
                                javax.jms.JMSException</PRE>
<DL>
<DD>Log this published message so that it can be passed through the system
 when the associated global transaction commits.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>xid</CODE> - - the global transaction identity<DD><CODE>message</CODE> - - the message published<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/tranlog/TransactionLogException.html">TransactionLogException</A></CODE> - - error adding the entry<DD><CODE><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManagerException.html">ResourceManagerException</A></CODE> - - error getting the trnasaction log<DD><CODE>javax.jms.JMSException</CODE> - - if there is an issue with prep'ing the message</DL>
</DD>
</DL>
<HR>

<A NAME="logReceivedMessage(javax.transaction.xa.Xid, java.lang.String, org.exolab.jms.message.MessageHandle)"><!-- --></A><H3>
logReceivedMessage</H3>
<PRE>
public void <B>logReceivedMessage</B>(javax.transaction.xa.Xid&nbsp;xid,
                               java.lang.String&nbsp;id,
                               <A HREF="../../../../org/exolab/jms/message/MessageHandle.html">MessageHandle</A>&nbsp;handle)
                        throws <A HREF="../../../../org/exolab/jms/tranlog/TransactionLogException.html">TransactionLogException</A>,
                               <A HREF="../../../../org/exolab/jms/messagemgr/ResourceManagerException.html">ResourceManagerException</A></PRE>
<DL>
<DD>Log that this message handle was sent to the consumer within the specified
 global transaction identity. The message will be acknowledged when the
 global transaction commits. Alternatively, if the global transaction is
 rolled back the message handle will be returned to the destination<DD><DL>
<DT><B>Parameters:</B><DD><CODE>txid</CODE> - - the global transaction identity<DD><CODE>id</CODE> - - the consumer receiving this message<DD><CODE>handle</CODE> - - the handle of the message received<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/tranlog/TransactionLogException.html">TransactionLogException</A></CODE> - - error adding the entry<DD><CODE><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManagerException.html">ResourceManagerException</A></CODE> - - error getting the transaction log</DL>
</DD>
</DL>
<HR>

<A NAME="logTransactionState(javax.transaction.xa.Xid, org.exolab.jms.tranlog.TransactionState)"><!-- --></A><H3>
logTransactionState</H3>
<PRE>
public void <B>logTransactionState</B>(javax.transaction.xa.Xid&nbsp;xid,
                                <A HREF="../../../../org/exolab/jms/tranlog/TransactionState.html">TransactionState</A>&nbsp;state)
                         throws <A HREF="../../../../org/exolab/jms/tranlog/TransactionLogException.html">TransactionLogException</A>,
                                <A HREF="../../../../org/exolab/jms/messagemgr/ResourceManagerException.html">ResourceManagerException</A></PRE>
<DL>
<DD>Add an <A HREF="../../../../org/exolab/jms/tranlog/StateTransactionLogEntry.html"><CODE>StateTransactionLogEntry</CODE></A> using the specified txid,
 rid and state<DD><DL>
<DT><B>Parameters:</B><DD><CODE>xid</CODE> - - the transaction identifier<DD><CODE>state</CODE> - - the transaction log state<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/tranlog/TransactionLogException.html">TransactionLogException</A></CODE> - - error adding the entry<DD><CODE><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManagerException.html">ResourceManagerException</A></CODE> - - error getting the trnasaction log</DL>
</DD>
</DL>
<HR>

<A NAME="garbageCollect()"><!-- --></A><H3>
garbageCollect</H3>
<PRE>
public void <B>garbageCollect</B>()</PRE>
<DL>
<DD>This is the entry point for the garbage collection callback. It scans
 through the each transaction log file and determines whether it can
 be garbage collected. If it can then it simply destroys the corresponding
 TransactionLog.</DL>
<HR>

<A NAME="commit(javax.transaction.xa.Xid, boolean)"><!-- --></A><H3>
commit</H3>
<PRE>
public void <B>commit</B>(javax.transaction.xa.Xid&nbsp;id,
                   boolean&nbsp;onePhase)
            throws javax.transaction.xa.XAException</PRE>
<DL>
<DD>Ensure that a transaction with the specified xid is currently active.
 If this is the case then commit the transaction based onb the value
 of the onePhase flag.
 <p>
 This will have the effect of passing all messages through<DD><DL>
<DT><B>Parameters:</B><DD><CODE>xid</CODE> - - the xa transaction identity<DD><CODE>onePhase</CODE> - - treu if it is a one phase commit<DT><B>Throws:</B><DD><CODE>javax.transaction.xa.XAException</CODE> - - if there is a problem completing the call</DL>
</DD>
</DL>
<HR>

<A NAME="end(javax.transaction.xa.Xid, int)"><!-- --></A><H3>
end</H3>
<PRE>
public void <B>end</B>(javax.transaction.xa.Xid&nbsp;id,
                int&nbsp;flags)
         throws javax.transaction.xa.XAException</PRE>
<DL>
<DD>Ends the work performed on behalf of a transaction branch. The resource
 manager disassociates the XA resource from the transaction branch
 specified and let the transaction be completedCommits an XA transaction
 that is in progress.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>xid</CODE> - - the xa transaction identity<DD><CODE>flags</CODE> - - one of TMSUCCESS, TMFAIL, or TMSUSPEND<DT><B>Throws:</B><DD><CODE>javax.transaction.xa.XAException</CODE> - - if there is a problem completing the call</DL>
</DD>
</DL>
<HR>

<A NAME="forget(javax.transaction.xa.Xid)"><!-- --></A><H3>
forget</H3>
<PRE>
public void <B>forget</B>(javax.transaction.xa.Xid&nbsp;id)
            throws javax.transaction.xa.XAException</PRE>
<DL>
<DD>Tell the resource manager to forget about a heuristically completed
 transaction branch.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>xid</CODE> - - the xa transaction identity<DT><B>Throws:</B><DD><CODE>javax.transaction.xa.XAException</CODE> - - if there is a problem completing the call</DL>
</DD>
</DL>
<HR>

<A NAME="getTransactionTimeout()"><!-- --></A><H3>
getTransactionTimeout</H3>
<PRE>
public int <B>getTransactionTimeout</B>()
                          throws javax.transaction.xa.XAException</PRE>
<DL>
<DD>Return the transaction timeout for this instance of the resource
 manager.<DD><DL>
<DT><B>Returns:</B><DD>int - the timeout in seconds<DT><B>Throws:</B><DD><CODE>javax.transaction.xa.XAException</CODE> - - if there is a problem completing the call</DL>
</DD>
</DL>
<HR>

<A NAME="isSameRM(javax.transaction.xa.XAResource)"><!-- --></A><H3>
isSameRM</H3>
<PRE>
public boolean <B>isSameRM</B>(javax.transaction.xa.XAResource&nbsp;xares)
                 throws javax.transaction.xa.XAException</PRE>
<DL>
<DD>Ask the resource manager to prepare for a transaction commit of the
 transaction specified in xid<DD><DL>
<DT><B>Parameters:</B><DD><CODE>xid</CODE> - - the xa transaction identity<DT><B>Returns:</B><DD>int - XA_RDONLY or XA_OK<DT><B>Throws:</B><DD><CODE>javax.transaction.xa.XAException</CODE> - - if there is a problem completing the call</DL>
</DD>
</DL>
<HR>

<A NAME="prepare(javax.transaction.xa.Xid)"><!-- --></A><H3>
prepare</H3>
<PRE>
public int <B>prepare</B>(javax.transaction.xa.Xid&nbsp;id)
            throws javax.transaction.xa.XAException</PRE>
<DL>
<DD>Obtain a list of prepared transaction branches from a resource manager.
 The transaction manager calls this method during recovery to obtain the
 list of transaction branches that are currently in prepared or
 heuristically completed states.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>flag</CODE> - - One of TMSTARTRSCAN, TMENDRSCAN, TMNOFLAGS. TMNOFLAGS<DD><CODE>Xid[]</CODE> - - the set of Xids to recover<DT><B>Throws:</B><DD><CODE>javax.transaction.xa.XAException</CODE> - - if there is a problem completing the call</DL>
</DD>
</DL>
<HR>

<A NAME="recover(int)"><!-- --></A><H3>
recover</H3>
<PRE>
public javax.transaction.xa.Xid[] <B>recover</B>(int&nbsp;flag)
                                   throws javax.transaction.xa.XAException</PRE>
<DL>
<DD>Inform the resource manager to roll back work done on behalf of a
 transaction branch<DD><DL>
<DT><B>Parameters:</B><DD><CODE>xid</CODE> - - the xa transaction identity<DT><B>Throws:</B><DD><CODE>javax.transaction.xa.XAException</CODE> - - if there is a problem completing the call</DL>
</DD>
</DL>
<HR>

<A NAME="rollback(javax.transaction.xa.Xid)"><!-- --></A><H3>
rollback</H3>
<PRE>
public void <B>rollback</B>(javax.transaction.xa.Xid&nbsp;id)
              throws javax.transaction.xa.XAException</PRE>
<DL>
<DD>Set the current transaction timeout value for this XAResource instance.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>seconds</CODE> - - timeout in seconds<DT><B>Returns:</B><DD>boolean - true if the new transaction timeout was accepted<DT><B>Throws:</B><DD><CODE>javax.transaction.xa.XAException</CODE> - - if there is a problem completing the call</DL>
</DD>
</DL>
<HR>

<A NAME="setTransactionTimeout(int)"><!-- --></A><H3>
setTransactionTimeout</H3>
<PRE>
public boolean <B>setTransactionTimeout</B>(int&nbsp;seconds)
                              throws javax.transaction.xa.XAException</PRE>
<DL>
<DD>Start work on behalf of a transaction branch specified in xid If TMJOIN
 is specified, the start is for joining a transaction previously seen by
 the resource manager<DD><DL>
<DT><B>Parameters:</B><DD><CODE>xid</CODE> - - the xa transaction identity<DD><CODE>flags</CODE> - - One of TMNOFLAGS, TMJOIN, or TMRESUME<DT><B>Throws:</B><DD><CODE>javax.transaction.xa.XAException</CODE> - - if there is a problem completing the call</DL>
</DD>
</DL>
<HR>

<A NAME="start(javax.transaction.xa.Xid, int)"><!-- --></A><H3>
start</H3>
<PRE>
public void <B>start</B>(javax.transaction.xa.Xid&nbsp;id,
                  int&nbsp;flags)
           throws javax.transaction.xa.XAException</PRE>
<DL>
</DL>
<HR>

<A NAME="start()"><!-- --></A><H3>
start</H3>
<PRE>
public void <B>start</B>()
           throws org.exolab.core.service.ServiceException</PRE>
<DL>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>start</CODE> in class <CODE>org.exolab.core.service.BasicService</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="stop()"><!-- --></A><H3>
stop</H3>
<PRE>
public void <B>stop</B>()
          throws org.exolab.core.service.ServiceException</PRE>
<DL>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>stop</CODE> in class <CODE>org.exolab.core.service.BasicService</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="run()"><!-- --></A><H3>
run</H3>
<PRE>
public void <B>run</B>()</PRE>
<DL>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>run</CODE> in class <CODE>org.exolab.core.service.BasicService</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getResourceManagerId()"><!-- --></A><H3>
getResourceManagerId</H3>
<PRE>
public java.lang.String <B>getResourceManagerId</B>()</PRE>
<DL>
<DD>Return the resource manager identity<DD><DL>
<DT><B>Returns:</B><DD>the resource manager identity</DL>
</DD>
</DL>
<HR>

<A NAME="createNextTransactionLog()"><!-- --></A><H3>
createNextTransactionLog</H3>
<PRE>
protected <A HREF="../../../../org/exolab/jms/tranlog/TransactionLog.html">TransactionLog</A> <B>createNextTransactionLog</B>()
                                           throws <A HREF="../../../../org/exolab/jms/messagemgr/ResourceManagerException.html">ResourceManagerException</A></PRE>
<DL>
<DD>Create the next <A HREF="../../../../org/exolab/jms/tranlog/TransactionLog.html"><CODE>TransactionLog</CODE></A> and add it to the list of
 managed transaction logs.
 <p>
 The method will throw ResourceManagerException if there is a
 problem completing the request.<DD><DL>
<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManagerException.html">ResourceManagerException</A></CODE> - &nbsp;</DL>
</DD>
</DL>
<HR>

<A NAME="buildLogFileList()"><!-- --></A><H3>
buildLogFileList</H3>
<PRE>
protected void <B>buildLogFileList</B>()</PRE>
<DL>
<DD>Build a list of all log files in the specified log directory<DD><DL>
<DT><B>Throws:</B><DD><CODE>java.lang.IllegalArgumentException</CODE> - - if the directory does not exist.</DL>
</DD>
</DL>
<HR>

<A NAME="getTransactionRecords(org.exolab.jms.tranlog.ExternalXid, java.lang.String)"><!-- --></A><H3>
getTransactionRecords</H3>
<PRE>
protected java.lang.Object[] <B>getTransactionRecords</B>(<A HREF="../../../../org/exolab/jms/tranlog/ExternalXid.html">ExternalXid</A>&nbsp;xid,
                                                   java.lang.String&nbsp;rid)</PRE>
<DL>
<DD>Return an arrya of records, both state and date, for the specified
 global transaction<DD><DL>
<DT><B>Parameters:</B><DD><CODE>xid</CODE> - - the global transaction id<DD><CODE>rid</CODE> - - the resource id<DT><B>Returns:</B><DD>Object[] - array of records</DL>
</DD>
</DL>
<HR>

<A NAME="getSequenceNumber(java.lang.String)"><!-- --></A><H3>
getSequenceNumber</H3>
<PRE>
protected long <B>getSequenceNumber</B>(java.lang.String&nbsp;name)
                          throws <A HREF="../../../../org/exolab/jms/messagemgr/ResourceManagerException.html">ResourceManagerException</A></PRE>
<DL>
<DD>Return the sequence number of the file
 files are associated with a unique number<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - - the file name to investigate<DT><B>Returns:</B><DD>long - the transaction log number<DT><B>Throws:</B><DD><CODE><A HREF="../../../../org/exolab/jms/messagemgr/ResourceManagerException.html">ResourceManagerException</A></CODE> - &nbsp;</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_bottom"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/ResourceManager.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/exolab/jms/server/rmi/RemoteJmsServerSessionIfc.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/exolab/jms/messagemgr/ResourceManagerException.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ResourceManager.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
Copyright &copy; 1999-2004 The OpenJMS Group. All Rights Reserved.
</BODY>
</HTML>
